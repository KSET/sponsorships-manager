<p id="notice"><%= notice %></p>


<p>
<b>Type:</b>
<%= @event.type %>
</p>

<p>
<b>Year:</b>
<%= @event.year %>
</p>


<p>
<b>Description:</b>
<%= @event.description %>
</p>

<table>
  <tr>
    <th>Name</th>
    <th>Division</th>
    <th>Action</th>
  </tr>
  <% @event.callers.each do |c| %>
  <tr>
    <td><%=c.name%></td>
    <td><%=c.division%></td>
    <td><%= link_to 'Remove', event_callers_remove_path(@event, c), confirm: 'Are you sure?', method: :delete %></td>
  </tr>  
  <% end %>
</table>

<br />

<%= form_tag({:controller => "events", :action => "add_caller"}, :method => "post") do |f| %>
  <div class="field">
    <%= label_tag (:caller_id) %><br />
    <% @callers = Caller.all.delete_if {|c| (@event.callers.include?(c))}%>
    <%= select_tag "caller_id", options_from_collection_for_select(@callers, "id", "name_and_division"), :prompt => "Who to add" %>
  </div>
  <div class="actions">
    <%= submit_tag "Add caller" %>
  </div>
<% end %>

<br />

<%= link_to 'Edit', edit_event_path(@event) %> |
<%= link_to 'Back', events_path %>
